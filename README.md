# Fpl-app

## General Info

A fantasy English Premier League (EPL) drafting app based on the [Fantasy Premier League (FPL) API](https://fantasy.premierleague.com/drf/bootstrap-static) using Ruby on Rails and React/Redux and hosted on Heroku.

### Creating/Joining a League

Leagues consist of 8-11 players. A user can create a league, thereby coming the commissioner of the league, which other users can join using the league name and the code that was generated by the commissioner.

### Drafting

Each user in a league must draft 15 players into their team through a snaking draft . The order in which the draft goes is randomly assigned to a user's team at the start of the draft. Each team must have 2 goalkeepers (GKP), 5 defenders (DEF), 5 midfielders (MID) and 3 forwards/strikers (FWD). No more than 3 players can be from the same EPL team i.e. you can only have 3 players from Manchester United in your team at one time. Action Cable is employed on the drafting screen to ensure that the drafting process is live for all users. The following example is for a league consisting of 10 users (U):

```
Randomly assigned draft order:
1 - U4, 2 - U6, 3 - U2, 4 - U7, 5 - U1, 6 - U9, 7 - U10, 8 - U4, 9 - U8, 10 - U3

Number of picks: 10 users in the league * 15 players in each team = 150 picks

Picks:
1 - U4, 2 - U6, 3 - U2, 4 - U7, 5 - U1, 6 - U9, 7 - U10, 8 - U4, 9 - U8, 10 - U3

11 - U3, 12 - U8, 13 - U4, 14 - U10, 15 - U9, 16 - U1, 17 - U7, 18 - U2, 19 - U6, 20 - U4

...

141 - U4, 142 - U6, 143 - U2, 144 - U7, 145 - U1, 146 - U9, 147 - U10, 148 - U4, 149 - U8, 150 - U3
```


### Selecting a Starting Line-Up and Scoring

11 of the 15 players in a user's team must be chosen to be part of the starting line-up whose points will contribute to the user's team's round score. Each starting line up must consist of a goalkeeper, a minimum of 3 defenders, a minimum of 3 midfielders and a minimum of 1 striker. Potential line-ups would therefore include:
```
1 GKP - 5 DEF - 4 MID - 1 FWD
1 GKP - 5 DEF - 3 MID - 2 FWD
1 GKP - 4 DEF - 4 MID - 2 FWD
1 GKP - 4 DEF - 3 MID - 3 FWD
1 GKP - 3 DEF - 3 MID - 3 FWD
1 GKP - 3 DEF - 4 MID - 3 FWD
1 GKP - 3 DEF - 5 MID - 2 FWD
```
The remaining 4 players act as substitutes - substitute goalkeeper (SGKP) and the remaining 3 players are ordered as Substitutes 1, 2 and 3 (S1, S2, S3). The substitutes that scored are automatically substituted one-by-one into the starting line-up by the scoring worker when a round has finished (scores have been data checked in the FPL API) if any of the starting players played 0 minutes in the round. This occurs according to the  order that the players were placed and the starting team's formation. Examples would include:

 - If the starting GKP did not play any minutes, the SGKP will automatically be substituted
 - If three starting field players (non-GKP) didn't play any minutes, they would be substituted by S1, S2 and S3 assuming that each substitute played minutes.
 - The starting team formation was `1 GKP - 5 DEF - 4 MID - 1 FWD` and the substitutes were `S1 MID, S2 FWD, S3 FWD`. If the starting FWD didn't play any minutes, S2 (or S3 if S2 didn't play any minutes) would be substituted into the team in order to keep the requirement that a minimum of 1 FWD must always be in the starting team.

### Trading
Trades give users the ability to substitute new players into their teams in order to attempt to improve their standing.

There are three types of trading:

 1. Waiver picks
 2. Trading free agents
 3. Inter team trades (trades between users in the league, which can encompass more than one player)

#### Waiver Picks
Waiver pick requests are processed 24 hours before a round's game week deadline (except for round 1, which has no waiver round).  A user can put forward several waiver requests during a round, which can be ordered. The lowest-ranked team will get their first waiver choice. After a successful (approved) waiver request, the team will move to the back of the waiver queue.

#### Trading free agents

Users can openly pick up free agent (unpicked) players in the 24 hours between when waiver picks are processed and the round's game week. The exception to this is round 1, which has free agent trading from the completion of the draft up until the start of the round.

#### Inter-team trades
Inter-team trades can occur up until the game week deadline time of a round. The team that receives a proposed inter-team trade can choose to approve or decline it. Any inter-team trades that are not approved or declined by the game week deadline will expire.


## Getting Started

### Prerequisites

```
Ruby: 2.4.2
Rails: 5.0.6
Bundler: 1.16.0
NPM
React: 16.1.0
Redis
Sidekiq
```

## Author

* [Daniel Sztolcman](https://github.com/djstozza)


## License

This project is licensed under the MIT License

## Acknowledgments

* [Fantasy Premier League (FPL) API](https://fantasy.premierleague.com/drf/bootstrap-static)
